@model GameTracker.Entity.Account.User

@{
    ViewData["Title"] = "Профиль";
}

<div class="profile_page">
    <div class="profile_container">
        <div class="profile_header">
            <img class="profile_avatar" src="@Model.AvatarPath" />
            <h3>@Model.Nickname</h3>
        </div>
        <div class="profile_main">
            <p style="margin-bottom: 20px">Пройдено игр: (( Здесь добавить данные от модели ))</p>
            <p>Логин: @Model.Login</p>
            <p style="margin-bottom: 20px">Email: @Model.Email</p>
            <p>Друзья:</p>
            <!--
            <ul>
                foreach (var friend in Model.Friends)
                {
                        <li>fried.Nickname</li> + Ссылка на профиль друга
                }
            </ul>
            -->
            <p>Роль: @Model.Role</p>
        </div>
        <form asp-action="Logout" asp-controller="Login" method="post">
            <button class="button_default">Выйти из аккаунта</button>
        </form>
        <form asp-action="DeleteUser" asp-controller="Profile" method="post">
            @Html.AntiForgeryToken()
            <button class="button_danger">Удалить аккаунт</button>
        </form>

        @if (Model.Role == GameTracker.Entity.Account.UserRole.Admin)
        {
            <div>
                <a asp-action="Index" asp-controller="Admin"><button class="button_default">ADMIN PANEL</button></a>
            </div>
        }

        @if(Model.Role == GameTracker.Entity.Account.UserRole.Moderator || Model.Role == GameTracker.Entity.Account.UserRole.Admin)
        {
            <div>
                <a asp-action="Index" asp-controller="Moder"><button class="button_default">MODER PANEL</button></a>
            </div>
        }
    </div>

    @if (Model.Status == GameTracker.Entity.Account.UserStatus.Inactive)
    {
        var viewModel = new GameTracker.ViewModel.Account.ConfirmEmailViewModel();
        @await Html.PartialAsync("~/Views/Shared/_ConfirmEmailPartial.cshtml", viewModel)
    }
    else
    {
        <div class="library_window">
            @await Html.PartialAsync("~/Views/Shared/_LibraryPartial.cshtml")
        </div>
    }
</div>